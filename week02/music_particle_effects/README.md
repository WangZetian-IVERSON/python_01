# 音乐粒子特效可视化器

这是一个基于Python的音乐可视化项目，能够分析音乐的节拍和鼓点，并生成相应的粒子特效动画。

## 功能特点

- **音频分析**: 使用librosa库分析音乐的BPM、节拍和音符开始点
- **粒子系统**: 实现了完整的粒子生命周期管理，包括生成、更新、消亡
- **节拍响应**: 粒子会根据音乐的节拍进行脉冲和扩张效果
- **可视化效果**: 粒子从左下角向右上角跳跃，带有发光轨迹效果
- **实时渲染**: 使用pygame实现60FPS的流畅动画

## 文件结构

```
music_particle_effects/
├── main.py                 # 主程序入口
├── audio_analyzer.py       # 音频分析模块
├── particle_system.py      # 粒子系统
├── requirements.txt        # 依赖包列表
├── audio/                  # 音频文件目录
└── README.md              # 说明文档
```

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 1. 使用模拟音频数据（测试）
```bash
python main.py
```

### 2. 使用真实音频文件
将音频文件放入`audio/`目录，然后修改`main.py`中的音频文件路径。

## 控制说明

- **ESC**: 退出程序
- **SPACE**: 手动触发粒子效果
- **C**: 清空所有粒子

## 技术实现

### 音频分析
- 使用librosa进行音频信号处理
- 检测BPM（每分钟节拍数）
- 分析onset（音符开始点）用于检测鼓点

### 粒子系统
- 每个粒子具有位置、速度、大小、颜色、生命值等属性
- 支持重力、摩擦力等物理效果
- 节拍脉冲会让粒子膨胀并获得额外速度

### 可视化效果
- 粒子从左下角生成，朝右上角移动
- 具有发光效果和轨迹淡化
- 根据节拍强度调整粒子颜色和大小

## 自定义参数

可以在各个模块中调整以下参数：

### 粒子系统参数
- `spawn_rate`: 每次节拍生成的粒子数量
- `max_particles`: 最大粒子数量
- `base_speed`: 粒子基础移动速度

### 视觉效果参数
- `color_palette`: 粒子颜色调色板
- `trail_alpha`: 轨迹透明度
- `background_color`: 背景颜色

## 扩展功能

可以进一步添加的功能：
- 支持更多音频格式
- 添加不同的粒子移动模式
- 实现音频播放同步
- 添加更多视觉效果（如网格、连线等）
- 支持实时音频输入

## 依赖库说明

- **librosa**: 音频分析和信号处理
- **pygame**: 图形渲染和用户交互
- **numpy**: 数值计算
- **scipy**: 科学计算（信号处理）
- **soundfile**: 音频文件I/O

## 注意事项

- 首次运行可能需要下载librosa的数据文件
- 音频文件建议使用WAV或MP3格式
- 性能与粒子数量和音频复杂度相关

## 开发团队

这个项目是音乐可视化技术的演示实现，展示了如何将音频分析与实时图形渲染相结合。